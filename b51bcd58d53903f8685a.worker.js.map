{"version":3,"sources":["../webpack/bootstrap","../node_modules/url/url.js","../node_modules/rusty-ts/dist/index.js","../node_modules/rusty-ts/dist/private/OptionImpl.js","../node_modules/rusty-ts/dist/private/ResultImpl.js","../node_modules/rusty-ts/dist/private/UnwrapError.js","../node_modules/node-libs-browser/node_modules/punycode/punycode.js","../node_modules/webpack/buildin/module.js","../node_modules/webpack/buildin/global.js","../node_modules/url/util.js","../node_modules/querystring-es3/index.js","../node_modules/querystring-es3/decode.js","../node_modules/querystring-es3/encode.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","matrix.ts","data/index.ts","data/mnist.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","network/utils.ts","network/networks/ch3crossEntropyL2.ts","network/networkFactory.ts","workerMessages.ts","networkSerializer.ts","workers/networkTrainer.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","punycode","require","util","Url","this","protocol","slashes","auth","host","port","hostname","hash","search","query","pathname","path","href","parse","urlParse","resolve","source","relative","resolveObject","format","obj","isString","protocolPattern","portPattern","simplePathPattern","unwise","concat","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","url","parseQueryString","slashesDenoteHost","isObject","u","TypeError","queryIndex","indexOf","splitter","uSplit","split","replace","rest","join","trim","length","simplePath","exec","substr","proto","lowerProto","toLowerCase","match","atSign","hostEnd","hec","lastIndexOf","slice","decodeURIComponent","parseHost","ipv6Hostname","hostparts","part","newpart","j","k","charCodeAt","validParts","notHost","bit","push","unshift","toASCII","h","ae","esc","encodeURIComponent","escape","qm","keys","stringify","charAt","rel","result","tkeys","tk","tkey","rkeys","rk","rkey","v","relPath","shift","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","pop","isNullOrUndefined","authInHost","isNull","last","hasTrailingSlash","up","splice","isAbsolute","__importDefault","mod","OptionImpl_1","ResultImpl_1","optionDotAll","options","values","option_1","isSome","default","none","some","resultDotAll","results","result_1","isOk","safeUnwrap","ok","option","all","fromVoidable","voidable","undefined","err","error","UnwrapError_1","OptionImpl","isNone_","matcher","isNone","map","mapper","_this","ifSome","executor","ifNone","unwrap","expect","message","unwrapOr","defaultValue","unwrapOrElse","defaultValueThunk","and","other","andThen","flatMapper","or","orElse","otherThunk","filter","predicate","flatten","innerOption","array","xor","transpose","res","e","equalsSome","someSatisfies","ResultImpl","isErr_","isErr","mapErr","ifOk","ifErr","safeUnwrapErr","unwrapErr","expectErr","unwrapOrThrowErr","unwrapErrOrThrowOk","opt","okSatisfies","errSatisfies","reverse","__extends","extendStatics","b","setPrototypeOf","__proto__","Array","__","constructor","UnwrapError","_super","Error","root","nodeType","freeGlobal","global","window","self","maxInt","regexPunycode","regexNonASCII","regexSeparators","errors","floor","Math","stringFromCharCode","String","fromCharCode","type","RangeError","fn","mapDomain","string","parts","ucs2decode","extra","output","counter","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","baseMinusTMin","base","decode","input","out","basic","index","oldi","w","baseMinusT","codePoint","inputLength","bias","encode","handledCPCount","basicLength","q","currentValue","handledCPCountPlusOne","qMinusT","test","define","webpackPolyfill","deprecate","paths","children","g","Function","arg","prop","qs","sep","eq","regexp","maxKeys","len","kstr","vstr","x","idx","isArray","xs","toString","stringifyPrimitive","isFinite","objectKeys","ks","f","_defineProperty","configurable","writable","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","apply","_objectSpread2","target","arguments","forEach","getOwnPropertyDescriptors","defineProperties","_arrayLikeToArray","arr","arr2","_unsupportedIterableToArray","minLen","from","_slicedToArray","iterator","_arr","_n","_d","_e","_s","_i","next","done","_toConsumableArray","iter","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","Matrix","rows","columns","data","size","random","fill","row","JSON","flat","entries","clone","product","zeros","thisData","otherData","productData","thisRows","otherColumns","thisColumns","productColumns","thisR","otherC","dot","thisC","transposed","cloneData","decimals","entryStrings","rowMajorOrderEntries","entry","toFixed","entryStringLengths","maxLength","max","topAndBottomBorder","repeat","str","leftpad","minLength","fillCharacter","diff","Idx3FileFormat","offset","requiredValue","Idx1FileFormat","getLabeledImages","imagesBuffer","labelsBuffer","images","buffer","bytes","Uint8Array","actual","getInt32MsbFirst","expected","assertIdx3MagicNumberIsCorrect","numberOfImages","imagesParsed","firstPixelIndex","vectorEntries","matrix","columnVector","getImages","labels","assertIdx1MagicNumberIsCorrect","numberOfLabels","firstLabelIndex","getLabels","labeledImages","inputs","label","convertLabelToVector","image","outputs","location","TRAINING_IMAGES_URL","TRAINING_LABELS_URL","TEST_IMAGES_URL","TEST_LABELS_URL","trainingImagesProm","getArrayBuffer","trainingLabelsProm","testImagesProm","testLabelsProm","fetch","then","response","status","arrayBuffer","statusText","text","getErrorMessage","errorMessage","Promise","reject","mnistProm","trainingImagesBuffer","trainingLabelsBuffer","testImagesBuffer","testLabelsBuffer","training","_createForOfIteratorHelper","F","it","normalCompletion","didErr","step","_e2","divideIntoMiniBatches","trainingData","miniBatchSize","exclMax","temp","shuffle","miniBatches","argmax","maxIndex","Chapter3CrossEntropyL2Network","sizes","log","layers","weights","biases","outputLayer","inputLayer","outputLayerSize","inputLayerSize","randomUniform","network","hyperParams","testData","batchSize","epochs","learningRate","trainingDataSize","epoch","miniBatch","getAverageGradients","regularizationRate","weightGradients","biasGradients","mutMultiplyScalar","mutSubtract","accuracyRate","getZeroMatricesForWeightGradients","getZeroMatricesForBiasGradients","imageGradients","getGradients","mutAdd","matrices","weightMatrix","biasMatrix","performForwardPass","weightedSums","activations","lastLayerError","getLastLayerError","immutMultiply","immutTranspose","mutHadamard","immutApplyElementwise","sigmaPrime","weightedSum","sigma","actualOutput","expectedOutput","immutSubtract","correctClassifications","correct","total","z","exp","sigmaZ","WorkerMessageType","networkFactory","fromWeightsAndBiases","serializeNetwork","getWeights","getBiases","entryCount","weightMatrixSize","biasMatrixSize","Float64Array","cursor","weightMatrixEntries","set","biasMatrixEntries","getEntries","numberOfBytesForSizes","Uint32Array","BYTES_PER_ELEMENT","ArrayBuffer","uints","toArray","floats","shouldTerminateAfterThisEpoch","trainedNetwork","notifyListenersOfTermination","messageType","TerminateTrainingResponse","networkBuffer","postMessage","addEventListener","event","StartTrainingRequest","numberOfLayers","layerSizes","fromRowMajorOrderEntries","subarray","deserializeNetwork","mnist","epochsCompleted","scheduleNextEpochUnlessTerminated","requestAnimationFrame","performEpoch","stochasticGradientDescent","TrainingEpochCompleteNotification","notifyListenersOfEpochCompletion","startTraining","startTrainingOnceMnistLoads","TerminateTrainingRequest"],"mappings":"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","file":"b51bcd58d53903f8685a.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar OptionImpl_1 = __importDefault(require(\"./private/OptionImpl\"));\nvar ResultImpl_1 = __importDefault(require(\"./private/ResultImpl\"));\nexports.option = {\n    /**\n     * Returns a `some` variant that wraps the provided value.\n     *\n     * Corresponds to Rust's `Option::<T>::Some(T)`.\n     */\n    some: function (value) {\n        return OptionImpl_1.default.some(value);\n    },\n    /**\n     * Returns the `none` variant.\n     *\n     * Corresponds to Rust's `Option::None`.\n     */\n    none: function () {\n        return OptionImpl_1.default.none();\n    },\n    /**\n     * Transposes an array of options into an optional array,\n     * analagous to how `Promise.all()` transposes\n     * an array of promises into promised array.\n     *\n     * If every option is `some`, this method returns `option.some(arr)`\n     * where `arr` is an array of the unwrapped `Option`s.\n     * Otherwise, this method returns `option.none()`.\n     *\n     * @param options A tuple or array of options.\n     */\n    all: optionDotAll,\n    /**\n     * Accepts one argument `t`, returning `none` if the `t`\n     * is `null` or `undefined` , otherwise returning `some(t)`.\n     */\n    fromVoidable: function (voidable) {\n        if (voidable === undefined || voidable === null) {\n            return OptionImpl_1.default.none();\n        }\n        else {\n            return OptionImpl_1.default.some(voidable);\n        }\n    },\n};\nfunction optionDotAll(options) {\n    var values = [];\n    for (var i = 0; i < options.length; i++) {\n        var option_1 = options[i];\n        if (option_1.isSome()) {\n            values.push(option_1.value);\n        }\n        else {\n            return OptionImpl_1.default.none();\n        }\n    }\n    return OptionImpl_1.default.some(values);\n}\nexports.optionDotAll = optionDotAll;\nexports.result = {\n    /**\n     * Returns an `ok` variant that wraps the provided value.\n     *\n     * Corresponds to Rust's `Result::<T, E>::Ok(T)`.\n     */\n    ok: function (value) {\n        return ResultImpl_1.default.ok(value);\n    },\n    /**\n     * Returns an `err` variant that wraps the provided value.\n     *\n     * Corresponds to Rust's `Result::<T, E>::Err(E)`.\n     */\n    err: function (error) {\n        return ResultImpl_1.default.err(error);\n    },\n    /**\n     * Transposes an array of results into an result with an array,\n     * analagous to how `Promise.all()` transposes\n     * an array of promises into promised array.\n     *\n     * If every result is `ok`, this method returns `result.ok(arr)`\n     * where `arr` is an array of the unwrapped `Result`s.\n     * Otherwise, this method returns `result.err(e)` where `e` is\n     * the error value of the first result in the array that was an `err`.\n     *\n     * @param results A tuple or array of results.\n     */\n    all: resultDotAll,\n};\nfunction resultDotAll(results) {\n    var values = [];\n    for (var i = 0; i < results.length; i++) {\n        var result_1 = results[i];\n        if (result_1.isOk()) {\n            values.push(result_1.safeUnwrap());\n        }\n        else {\n            return result_1;\n        }\n    }\n    return ResultImpl_1.default.ok(values);\n}\nexports.resultDotAll = resultDotAll;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ResultImpl_1 = __importDefault(require(\"./ResultImpl\"));\nvar UnwrapError_1 = __importDefault(require(\"./UnwrapError\"));\nvar OptionImpl = /** @class */ (function () {\n    function OptionImpl(isNone_, value) {\n        this.isNone_ = isNone_;\n        this.value = value;\n    }\n    OptionImpl.some = function (value) {\n        return new OptionImpl(false, value);\n    };\n    OptionImpl.none = function () {\n        return new OptionImpl(true, undefined);\n    };\n    OptionImpl.prototype.match = function (matcher) {\n        if (this.isNone()) {\n            return matcher.none();\n        }\n        else {\n            return matcher.some(this.value);\n        }\n    };\n    OptionImpl.prototype.isNone = function () {\n        return this.isNone_;\n    };\n    OptionImpl.prototype.isSome = function () {\n        return !this.isNone();\n    };\n    OptionImpl.prototype.map = function (mapper) {\n        var _this = this;\n        return this.match({\n            none: function () { return _this; },\n            some: function (value) { return OptionImpl.some(mapper(value)); },\n        });\n    };\n    OptionImpl.prototype.ifSome = function (executor) {\n        this.map(executor);\n    };\n    OptionImpl.prototype.ifNone = function (executor) {\n        if (this.isNone()) {\n            executor();\n        }\n    };\n    OptionImpl.prototype.unwrap = function () {\n        return this.expect(\"Tried to call unwrap() on option.none()\");\n    };\n    OptionImpl.prototype.expect = function (message) {\n        return this.match({\n            none: function () {\n                var error = \"string\" === typeof message ? new UnwrapError_1.default(message) : message;\n                throw error;\n            },\n            some: function (value) { return value; },\n        });\n    };\n    OptionImpl.prototype.unwrapOr = function (defaultValue) {\n        return this.match({\n            none: function () { return defaultValue; },\n            some: function (value) { return value; },\n        });\n    };\n    OptionImpl.prototype.unwrapOrElse = function (defaultValueThunk) {\n        return this.match({\n            none: function () { return defaultValueThunk(); },\n            some: function (value) { return value; },\n        });\n    };\n    OptionImpl.prototype.and = function (other) {\n        return this.match({\n            none: function () { return OptionImpl.none(); },\n            some: function () { return other; },\n        });\n    };\n    OptionImpl.prototype.andThen = function (flatMapper) {\n        return this.match({\n            none: function () { return OptionImpl.none(); },\n            some: flatMapper,\n        });\n    };\n    OptionImpl.prototype.or = function (other) {\n        var _this = this;\n        return this.match({\n            none: function () { return other; },\n            some: function () { return _this; },\n        });\n    };\n    OptionImpl.prototype.orElse = function (otherThunk) {\n        var _this = this;\n        return this.match({\n            none: otherThunk,\n            some: function () { return _this; },\n        });\n    };\n    OptionImpl.prototype.filter = function (predicate) {\n        var _this = this;\n        return this.andThen(function (value) { return (predicate(value) ? _this : OptionImpl.none()); });\n    };\n    OptionImpl.prototype.flatten = function () {\n        return this.andThen(function (innerOption) { return innerOption; });\n    };\n    OptionImpl.prototype.array = function () {\n        return this.match({ none: function () { return []; }, some: function (value) { return [value]; } });\n    };\n    OptionImpl.prototype.xor = function (other) {\n        var _this = this;\n        return this.match({\n            none: function () { return other; },\n            some: function () {\n                return other.match({\n                    none: function () { return _this; },\n                    some: function () { return OptionImpl.none(); },\n                });\n            },\n        });\n    };\n    OptionImpl.prototype.transpose = function () {\n        return this.match({\n            none: function () { return ResultImpl_1.default.ok(OptionImpl.none()); },\n            some: function (res) {\n                return res.match({\n                    ok: function (t) { return ResultImpl_1.default.ok(OptionImpl.some(t)); },\n                    err: function (e) { return ResultImpl_1.default.err(e); },\n                });\n            },\n        });\n    };\n    OptionImpl.prototype.equalsSome = function (other) {\n        return this.match({\n            none: function () { return false; },\n            some: function (v) { return v === other; },\n        });\n    };\n    OptionImpl.prototype.someSatisfies = function (predicate) {\n        return this.match({\n            none: function () { return false; },\n            some: predicate,\n        });\n    };\n    return OptionImpl;\n}());\nexports.default = OptionImpl;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar OptionImpl_1 = __importDefault(require(\"./OptionImpl\"));\nvar UnwrapError_1 = __importDefault(require(\"./UnwrapError\"));\nvar ResultImpl = /** @class */ (function () {\n    function ResultImpl(isErr_, value) {\n        this.isErr_ = isErr_;\n        this.value = value;\n    }\n    ResultImpl.ok = function (value) {\n        return new ResultImpl(false, value);\n    };\n    ResultImpl.err = function (error) {\n        return new ResultImpl(true, error);\n    };\n    ResultImpl.prototype.match = function (matcher) {\n        if (this.isErr_) {\n            return matcher.err(this.value);\n        }\n        else {\n            return matcher.ok(this.value);\n        }\n    };\n    ResultImpl.prototype.ok = function () {\n        return this.match({\n            ok: function (t) { return OptionImpl_1.default.some(t); },\n            err: function () { return OptionImpl_1.default.none(); },\n        });\n    };\n    ResultImpl.prototype.err = function () {\n        return this.match({\n            ok: function () { return OptionImpl_1.default.none(); },\n            err: function (e) { return OptionImpl_1.default.some(e); },\n        });\n    };\n    ResultImpl.prototype.isOk = function () {\n        return !this.isErr_;\n    };\n    ResultImpl.prototype.isErr = function () {\n        return this.isErr_;\n    };\n    ResultImpl.prototype.map = function (mapper) {\n        var _this = this;\n        return this.match({\n            ok: function (t) { return ResultImpl.ok(mapper(t)); },\n            err: function () { return _this; },\n        });\n    };\n    ResultImpl.prototype.mapErr = function (mapper) {\n        var _this = this;\n        return this.match({\n            err: function (e) { return ResultImpl.err(mapper(e)); },\n            ok: function () { return _this; },\n        });\n    };\n    ResultImpl.prototype.ifOk = function (executor) {\n        this.map(executor);\n    };\n    ResultImpl.prototype.ifErr = function (executor) {\n        this.mapErr(executor);\n    };\n    ResultImpl.prototype.unwrap = function () {\n        return this.expect(\"Tried to call unwrap() on result.err()\");\n    };\n    ResultImpl.prototype.safeUnwrap = function () {\n        return this.value;\n    };\n    ResultImpl.prototype.safeUnwrapErr = function () {\n        return this.value;\n    };\n    ResultImpl.prototype.unwrapErr = function () {\n        return this.expectErr(\"Tried to call unwrapErr() on result.ok()\");\n    };\n    ResultImpl.prototype.unwrapOrThrowErr = function () {\n        return this.match({\n            ok: function (t) { return t; },\n            err: function (e) {\n                throw e;\n            },\n        });\n    };\n    ResultImpl.prototype.unwrapErrOrThrowOk = function () {\n        return this.match({\n            ok: function (t) {\n                throw t;\n            },\n            err: function (e) { return e; },\n        });\n    };\n    ResultImpl.prototype.expect = function (message) {\n        return this.match({\n            ok: function (value) { return value; },\n            err: function () {\n                var error = \"string\" === typeof message ? new UnwrapError_1.default(message) : message;\n                throw error;\n            },\n        });\n    };\n    ResultImpl.prototype.expectErr = function (message) {\n        return this.match({\n            ok: function () {\n                var error = \"string\" === typeof message ? new UnwrapError_1.default(message) : message;\n                throw error;\n            },\n            err: function (value) { return value; },\n        });\n    };\n    ResultImpl.prototype.unwrapOr = function (defaultValue) {\n        return this.match({\n            ok: function (value) { return value; },\n            err: function () { return defaultValue; },\n        });\n    };\n    ResultImpl.prototype.unwrapOrElse = function (defaultValueThunk) {\n        var _this = this;\n        return this.match({\n            ok: function (value) { return value; },\n            err: function () { return defaultValueThunk(_this.value); },\n        });\n    };\n    ResultImpl.prototype.and = function (other) {\n        var _this = this;\n        return this.match({\n            ok: function () { return other; },\n            err: function () { return _this; },\n        });\n    };\n    ResultImpl.prototype.andThen = function (flatMapper) {\n        var _this = this;\n        return this.match({\n            ok: flatMapper,\n            err: function () { return _this; },\n        });\n    };\n    ResultImpl.prototype.or = function (other) {\n        var _this = this;\n        return this.match({\n            ok: function () { return _this; },\n            err: function () { return other; },\n        });\n    };\n    ResultImpl.prototype.orElse = function (otherThunk) {\n        var _this = this;\n        return this.match({\n            ok: function () { return _this; },\n            err: otherThunk,\n        });\n    };\n    ResultImpl.prototype.array = function () {\n        return this.match({\n            ok: function (t) { return [t]; },\n            err: function () { return []; },\n        });\n    };\n    ResultImpl.prototype.transpose = function () {\n        return this.match({\n            ok: function (opt) {\n                return opt.match({\n                    some: function (t) { return OptionImpl_1.default.some(ResultImpl.ok(t)); },\n                    none: function () { return OptionImpl_1.default.none(); },\n                });\n            },\n            err: function (e) { return OptionImpl_1.default.some(ResultImpl.err(e)); },\n        });\n    };\n    ResultImpl.prototype.okSatisfies = function (predicate) {\n        return this.ok().match({\n            some: predicate,\n            none: function () { return false; },\n        });\n    };\n    ResultImpl.prototype.errSatisfies = function (predicate) {\n        return this.err().match({\n            some: predicate,\n            none: function () { return false; },\n        });\n    };\n    ResultImpl.prototype.reverse = function () {\n        return this.match({\n            ok: function (t) { return ResultImpl.err(t); },\n            err: function (e) { return ResultImpl.ok(e); },\n        });\n    };\n    return ResultImpl;\n}());\nexports.default = ResultImpl;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * An error that occurs when `unwrap()` or `expect()`\n * is called on `option.none()` or `result.err()`, or\n * `unwrapErr()` or `expectErr()` is called on `result.ok()`.\n */\nvar UnwrapError = /** @class */ (function (_super) {\n    __extends(UnwrapError, _super);\n    function UnwrapError(message) {\n        var _this = _super.call(this, message) || this;\n        _this.name = \"UnwrapError\";\n        return _this;\n    }\n    return UnwrapError;\n}(Error));\nexports.default = UnwrapError;\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export class Matrix {\n  static randomUniform(rows: number, columns: number): Matrix {\n    const size = rows * columns;\n    const data = new Array(size);\n    for (let i = 0; i < size; i++) {\n      data[i] = Math.random() * 2 - 1;\n    }\n    return new Matrix(rows, columns, data);\n  }\n\n  static zeros(rows: number, columns: number): Matrix {\n    const data = new Array(rows * columns).fill(0);\n    return new Matrix(rows, columns, data);\n  }\n\n  static fromRows(rows: number[][]): Matrix {\n    const columns = rows[0].length;\n    if (rows.some((row) => row.length !== columns)) {\n      throw new Error(\n        \"Cannot create a matrix from a jagged array: \" + JSON.stringify(rows)\n      );\n    }\n\n    return new Matrix(rows.length, columns, rows.flat());\n  }\n\n  static columnVector(entries: number[]): Matrix {\n    return new Matrix(entries.length, 1, entries);\n  }\n\n  static fromRowMajorOrderEntries(\n    rows: number,\n    columns: number,\n    entries: number[]\n  ): Matrix {\n    if (entries.length !== rows * columns) {\n      throw new Error(\n        \"Expected \" +\n          rows * columns +\n          \" entries but instead got \" +\n          entries.length +\n          \".\"\n      );\n    }\n\n    return new Matrix(rows, columns, entries);\n  }\n\n  public readonly rows: number;\n  public readonly columns: number;\n  private data: number[];\n\n  private constructor(rows: number, columns: number, data: number[]) {\n    this.rows = rows;\n    this.columns = columns;\n    this.data = data;\n  }\n\n  clone(): Matrix {\n    return new Matrix(this.rows, this.columns, this.data.slice());\n  }\n\n  mutMultiplyScalar(n: number): this {\n    const size = this.data.length;\n    for (let i = 0; i < size; i++) {\n      this.data[i] *= n;\n    }\n    return this;\n  }\n\n  mutAdd(other: Matrix): this {\n    if (!(other.rows === this.rows && other.columns === this.columns)) {\n      throw new TypeError(\n        \"Cannot add a \" +\n          this.rows +\n          \"x\" +\n          this.columns +\n          \" to a \" +\n          other.rows +\n          \"x\" +\n          other.columns +\n          \" matrix.\"\n      );\n    }\n\n    const size = this.data.length;\n    for (let i = 0; i < size; i++) {\n      this.data[i] += other.data[i];\n    }\n\n    return this;\n  }\n\n  mutSubtract(other: Matrix): this {\n    if (!(other.rows === this.rows && other.columns === this.columns)) {\n      throw new TypeError(\n        \"Cannot add a \" +\n          this.rows +\n          \"x\" +\n          this.columns +\n          \" to a \" +\n          other.rows +\n          \"x\" +\n          other.columns +\n          \" matrix.\"\n      );\n    }\n\n    const size = this.data.length;\n    for (let i = 0; i < size; i++) {\n      this.data[i] -= other.data[i];\n    }\n\n    return this;\n  }\n\n  immutSubtract(other: Matrix): Matrix {\n    if (!(other.rows === this.rows && other.columns === this.columns)) {\n      throw new TypeError(\n        \"Cannot add a \" +\n          this.rows +\n          \"x\" +\n          this.columns +\n          \" matrix to a \" +\n          other.rows +\n          \"x\" +\n          other.columns +\n          \" matrix.\"\n      );\n    }\n\n    const clone = this.clone();\n    const size = clone.data.length;\n    for (let i = 0; i < size; i++) {\n      clone.data[i] -= other.data[i];\n    }\n    return clone;\n  }\n\n  immutMultiply(other: Matrix): Matrix {\n    if (this.columns !== other.rows) {\n      throw new TypeError(\n        \"Cannot multiply a \" +\n          this.rows +\n          \"x\" +\n          this.columns +\n          \" matrix with a \" +\n          other.rows +\n          \"x\" +\n          other.columns +\n          \" matrix.\"\n      );\n    }\n\n    const product = Matrix.zeros(this.rows, other.columns);\n\n    const thisData = this.data;\n    const otherData = other.data;\n    const productData = product.data;\n    const thisRows = this.rows;\n    const otherColumns = other.columns;\n    const thisColumns = this.columns;\n    const productColumns = product.columns;\n\n    for (let thisR = 0; thisR < thisRows; thisR++) {\n      for (let otherC = 0; otherC < otherColumns; otherC++) {\n        let dot = 0;\n        for (let thisC = 0; thisC < thisColumns; thisC++) {\n          dot +=\n            thisData[thisR * thisColumns + thisC] *\n            otherData[thisC * otherColumns + otherC];\n        }\n        productData[thisR * productColumns + otherC] = dot;\n      }\n    }\n    return product;\n  }\n\n  mutHadamard(other: Matrix): this {\n    if (!(other.rows === this.rows && other.columns === this.columns)) {\n      throw new TypeError(\n        \"Cannot take the Hadamard product of a \" +\n          this.rows +\n          \"x\" +\n          this.columns +\n          \" matrix and a \" +\n          other.rows +\n          \"x\" +\n          other.columns +\n          \" matrix.\"\n      );\n    }\n\n    const size = this.data.length;\n    for (let i = 0; i < size; i++) {\n      this.data[i] *= other.data[i];\n    }\n    return this;\n  }\n\n  immutTranspose(): Matrix {\n    const transposed = new Matrix(this.columns, this.rows, this.data.slice());\n    for (let r = 0; r < this.rows; r++) {\n      for (let c = 0; c < this.columns; c++) {\n        transposed.data[c * transposed.columns + r] = this.data[\n          r * this.columns + c\n        ];\n      }\n    }\n    return transposed;\n  }\n\n  rowMajorOrderEntries(): readonly number[] {\n    return this.data;\n  }\n\n  immutApplyElementwise(f: (entry: number) => number): Matrix {\n    const clone = this.clone();\n    const cloneData = clone.data;\n    const size = cloneData.length;\n    for (let i = 0; i < size; i++) {\n      cloneData[i] = f(cloneData[i]);\n    }\n    return clone;\n  }\n\n  print(decimals: number): string {\n    const entries = this.rowMajorOrderEntries();\n    const entryStrings = entries.map((entry) => entry.toFixed(decimals));\n    const entryStringLengths = entryStrings.map((s) => s.length);\n    const maxLength = Math.max(...entryStringLengths);\n\n    const topAndBottomBorder = \"-\".repeat(\n      this.columns * (maxLength + \" | \".length) - \" | \".length\n    );\n\n    let str = topAndBottomBorder + \"\\n\";\n\n    for (let r = 0; r < this.rows; r++) {\n      for (let c = 0; c < this.columns; c++) {\n        str +=\n          leftpad(entryStrings[r * this.columns + c], maxLength, \" \") + \" | \";\n      }\n\n      str = str.slice(0, -\" | \".length);\n\n      str += \"\\n\";\n    }\n\n    str += topAndBottomBorder;\n    return str;\n  }\n}\n\nfunction leftpad(s: string, minLength: number, fillCharacter: string): string {\n  const diff = minLength - s.length;\n  if (diff <= 0) {\n    return s;\n  }\n\n  return fillCharacter.repeat(diff) + s;\n}\n","import { Matrix } from \"../matrix\";\n\nexport interface LabeledImage {\n  rows: number;\n  columns: number;\n  inputs: Matrix;\n  label: number;\n}\n\nexport interface VectorLabeledImage {\n  rows: number;\n  columns: number;\n  inputs: Matrix;\n  outputs: Matrix;\n}\n\ninterface ImageMatrix {\n  rows: number;\n  columns: number;\n  matrix: Matrix;\n}\n\nexport interface AccuracyRate {\n  correct: number;\n  total: number;\n}\n\nconst Idx3FileFormat = {\n  MagicNumber: { offset: 0, requiredValue: 0x00000803 },\n  NumberOfImages: { offset: 4 },\n  NumberOfRows: { offset: 8 },\n  NumberOfColumns: { offset: 12 },\n} as const;\n\nconst Idx1FileFormat = {\n  MagicNumber: { offset: 0, requiredValue: 0x00000801 },\n  NumberOfLabels: { offset: 4 },\n} as const;\n\nexport function getLabeledImages(\n  imagesBuffer: ArrayBuffer,\n  labelsBuffer: ArrayBuffer\n): LabeledImage[] {\n  const images = getImages(imagesBuffer);\n  const labels = getLabels(labelsBuffer);\n\n  if (images.length !== labels.length) {\n    throw new Error(\n      \"There are \" +\n        images.length +\n        \" images, but \" +\n        labels.length +\n        \" labels. There must be the same amount of images and labels.\"\n    );\n  }\n\n  const labeledImages: LabeledImage[] = new Array(images.length);\n  for (let i = 0; i < images.length; i++) {\n    const { rows, columns, matrix } = images[i];\n    labeledImages[i] = { rows, columns, inputs: matrix, label: labels[i] };\n  }\n  return labeledImages;\n}\n\nfunction getImages(buffer: ArrayBuffer): ImageMatrix[] {\n  const bytes = new Uint8Array(buffer);\n\n  assertIdx3MagicNumberIsCorrect(bytes);\n\n  const numberOfImages = getInt32MsbFirst(\n    bytes,\n    Idx3FileFormat.NumberOfImages.offset\n  );\n  const rows = getInt32MsbFirst(bytes, Idx3FileFormat.NumberOfRows.offset);\n  const columns = getInt32MsbFirst(\n    bytes,\n    Idx3FileFormat.NumberOfColumns.offset\n  );\n  const size = rows * columns;\n\n  let imagesParsed = 0;\n  const images: ImageMatrix[] = new Array(numberOfImages);\n  const firstPixelIndex = Idx3FileFormat.NumberOfColumns.offset + 4;\n\n  while (imagesParsed < numberOfImages) {\n    const vectorEntries: number[] = new Array(size);\n    for (let j = 0; j < size; j++) {\n      vectorEntries[j] = bytes[firstPixelIndex + imagesParsed * size + j] / 255;\n    }\n\n    images[imagesParsed] = {\n      rows,\n      columns,\n      matrix: Matrix.columnVector(vectorEntries),\n    };\n    imagesParsed++;\n  }\n\n  return images;\n}\n\nfunction assertIdx3MagicNumberIsCorrect(bytes: Uint8Array): void {\n  const actual = getInt32MsbFirst(bytes, Idx3FileFormat.MagicNumber.offset);\n  const expected = Idx3FileFormat.MagicNumber.requiredValue;\n  if (actual !== expected) {\n    throw new Error(\n      \"The first 4 bytes of an idx3 file must be 0x\" +\n        expected.toString(16) +\n        \", but the first 4 bytes of the provided file were 0x\" +\n        actual.toString(16)\n    );\n  }\n}\n\nfunction getInt32MsbFirst(bytes: Uint8Array, offset: number): number {\n  return (\n    (bytes[offset] << 24) |\n    (bytes[offset + 1] << 16) |\n    (bytes[offset + 2] << 8) |\n    bytes[offset + 3]\n  );\n}\n\nfunction getLabels(buffer: ArrayBuffer): number[] {\n  const bytes = new Uint8Array(buffer);\n\n  assertIdx1MagicNumberIsCorrect(bytes);\n\n  const numberOfLabels = getInt32MsbFirst(\n    bytes,\n    Idx1FileFormat.NumberOfLabels.offset\n  );\n  const labels: number[] = new Array(numberOfLabels);\n  const firstLabelIndex = Idx1FileFormat.NumberOfLabels.offset + 4;\n  for (let i = 0; i < numberOfLabels; i++) {\n    labels[i] = bytes[firstLabelIndex + i];\n  }\n  return labels;\n}\n\nfunction assertIdx1MagicNumberIsCorrect(bytes: Uint8Array): void {\n  const actual = getInt32MsbFirst(bytes, Idx1FileFormat.MagicNumber.offset);\n  const expected = Idx1FileFormat.MagicNumber.requiredValue;\n  if (actual !== expected) {\n    throw new Error(\n      \"The first 4 bytes of an idx1 file must be 0x\" +\n        expected.toString(16) +\n        \", but the first 4 bytes of the provided file were 0x\" +\n        actual.toString(16)\n    );\n  }\n}\n\nexport function convertLabelToVector(image: LabeledImage): VectorLabeledImage {\n  const entries: number[] = new Array(10).fill(0);\n  entries[image.label] = 1;\n  const outputs = Matrix.columnVector(entries);\n  return {\n    rows: image.rows,\n    columns: image.columns,\n    inputs: image.inputs,\n    outputs,\n  };\n}\n","import url from \"url\";\nimport {\n  convertLabelToVector,\n  getLabeledImages,\n  LabeledImage,\n  VectorLabeledImage,\n} from \".\";\n\nexport interface MnistData {\n  training: VectorLabeledImage[];\n  test: LabeledImage[];\n}\n\ndeclare const self: { location: Window[\"location\"] };\n\nconst { location } = self;\n\nconst TRAINING_IMAGES_URL = url.resolve(\n  location.href,\n  \"./assets/train60k-images-idx3-ubyte\"\n);\nconst TRAINING_LABELS_URL = url.resolve(\n  location.href,\n  \"./assets/train60k-labels-idx1-ubyte\"\n);\nconst TEST_IMAGES_URL = url.resolve(\n  location.href,\n  \"./assets/test10k-images-idx3-ubyte\"\n);\nconst TEST_LABELS_URL = url.resolve(\n  location.href,\n  \"./assets/test10k-labels-idx1-ubyte\"\n);\nconst trainingImagesProm: Promise<ArrayBuffer> = getArrayBuffer(\n  TRAINING_IMAGES_URL\n);\nconst trainingLabelsProm: Promise<ArrayBuffer> = getArrayBuffer(\n  TRAINING_LABELS_URL\n);\nconst testImagesProm: Promise<ArrayBuffer> = getArrayBuffer(TEST_IMAGES_URL);\nconst testLabelsProm: Promise<ArrayBuffer> = getArrayBuffer(TEST_LABELS_URL);\n\nfunction getArrayBuffer(url: string): Promise<ArrayBuffer> {\n  return fetch(url).then((response) => {\n    if (200 <= response.status && response.status <= 299) {\n      return response.arrayBuffer();\n    } else {\n      return getErrorMessage(response).then((errorMessage) =>\n        Promise.reject(\n          new Error(\n            \"Tried to fetch \" +\n              url +\n              \" but got the following error: \" +\n              errorMessage\n          )\n        )\n      );\n    }\n  });\n}\n\nfunction getErrorMessage(response: Response): Promise<string> {\n  const { status, statusText } = response;\n  return response\n    .text()\n    .then((text) => status + \" (\" + statusText + \"): \" + text);\n}\n\nexport const mnistProm: Promise<MnistData> = Promise.all([\n  trainingImagesProm,\n  trainingLabelsProm,\n  testImagesProm,\n  testLabelsProm,\n]).then(\n  ([\n    trainingImagesBuffer,\n    trainingLabelsBuffer,\n    testImagesBuffer,\n    testLabelsBuffer,\n  ]) => {\n    return {\n      training: getLabeledImages(\n        trainingImagesBuffer,\n        trainingLabelsBuffer\n      ).map(convertLabelToVector),\n      test: getLabeledImages(testImagesBuffer, testLabelsBuffer),\n    };\n  }\n);\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import { MatrixMap } from \".\";\nimport { VectorLabeledImage } from \"../data\";\n\nexport interface Gradients {\n  weightGradients: MatrixMap;\n  biasGradients: MatrixMap;\n}\n\nexport function divideIntoMiniBatches(\n  trainingData: VectorLabeledImage[],\n  miniBatchSize: number\n): VectorLabeledImage[][] {\n  shuffle(trainingData);\n  const miniBatches: VectorLabeledImage[][] = [];\n  for (let i = 0; i < trainingData.length; i += miniBatchSize) {\n    miniBatches.push(trainingData.slice(i, i + miniBatchSize));\n  }\n  return miniBatches;\n}\n\nfunction shuffle(arr: unknown[]): void {\n  const SHUFFLE_TIMES = 512;\n\n  for (let n = 0; n < SHUFFLE_TIMES; n++) {\n    for (let i = arr.length - 1; i >= 1; i--) {\n      let j = randInt(i + 1);\n      const temp = arr[i];\n      arr[i] = arr[j];\n      arr[j] = temp;\n    }\n  }\n}\n\nfunction randInt(exclMax: number): number {\n  return Math.floor(Math.random() * exclMax);\n}\n\nexport function argmax(arr: readonly number[]): number {\n  let maxIndex = 0;\n  let max = arr[maxIndex];\n  for (let i = 1; i < arr.length; i++) {\n    const value = arr[i];\n    if (value > max) {\n      max = value;\n      maxIndex = i;\n    }\n  }\n  return maxIndex;\n}\n","import {\n  MatrixMap,\n  Network,\n  StochasticGradientDescentHyperParameters,\n  WeightedSumsAndActivations,\n} from \"..\";\nimport { AccuracyRate, LabeledImage, VectorLabeledImage } from \"../../data\";\nimport { DeepReadonly } from \"../../deepReadonly\";\nimport { Matrix } from \"../../matrix\";\nimport { argmax, divideIntoMiniBatches, Gradients } from \"../utils\";\n\n/** Cross-entropy cost, sigmoid activation, L2 regularization */\nexport class Chapter3CrossEntropyL2Network implements Network {\n  private layers: number;\n  private weights: MatrixMap;\n  private biases: MatrixMap;\n  private log: (accuracyRate: AccuracyRate, epoch: number) => void;\n\n  public readonly sizes: number[];\n\n  static fromWeightsAndBiases(weights: MatrixMap, biases: MatrixMap): Network {\n    const sizes = [weights[1].columns];\n    for (let i = 1; i < weights.length; i++) {\n      sizes.push(weights[i].rows);\n    }\n\n    const network = new Chapter3CrossEntropyL2Network(sizes);\n\n    for (let i = 1; i < weights.length; i++) {\n      network.weights[i] = weights[i];\n      network.biases[i] = biases[i];\n    }\n\n    return network;\n  }\n\n  constructor(\n    sizes: number[],\n    log?: (accuracyRate: AccuracyRate, epoch: number) => void\n  ) {\n    this.layers = sizes.length;\n\n    this.weights = [];\n    this.biases = [];\n    for (let outputLayer = 1; outputLayer < sizes.length; outputLayer++) {\n      const inputLayer = outputLayer - 1;\n      const outputLayerSize = sizes[outputLayer];\n      const inputLayerSize = sizes[inputLayer];\n      this.weights[outputLayer] = Matrix.randomUniform(\n        outputLayerSize,\n        inputLayerSize\n      );\n      this.biases[outputLayer] = Matrix.randomUniform(outputLayerSize, 1);\n    }\n\n    this.log = log || (() => {});\n\n    this.sizes = sizes;\n  }\n\n  stochasticGradientDescent(\n    trainingData: VectorLabeledImage[],\n    hyperParams: StochasticGradientDescentHyperParameters,\n    testData?: LabeledImage[]\n  ): void {\n    const { batchSize, epochs, learningRate } = hyperParams;\n    const trainingDataSize = trainingData.length;\n\n    for (let epoch = 0; epoch < epochs; epoch++) {\n      const miniBatches = divideIntoMiniBatches(trainingData, batchSize);\n      for (const miniBatch of miniBatches) {\n        const { weightGradients, biasGradients } = this.getAverageGradients(\n          miniBatch,\n          hyperParams.regularizationRate,\n          trainingDataSize\n        );\n\n        for (let i = 1; i < this.layers; i++) {\n          weightGradients[i].mutMultiplyScalar(learningRate);\n          biasGradients[i].mutMultiplyScalar(learningRate);\n\n          this.weights[i].mutSubtract(weightGradients[i]);\n          this.biases[i].mutSubtract(biasGradients[i]);\n        }\n      }\n\n      if (testData !== undefined) {\n        const accuracyRate = this.test(testData);\n        this.log(accuracyRate, epoch);\n      }\n    }\n  }\n\n  private getAverageGradients(\n    miniBatch: VectorLabeledImage[],\n    regularizationRate: number,\n    trainingDataSize: number\n  ): Gradients {\n    const weightGradients = this.getZeroMatricesForWeightGradients();\n    const biasGradients = this.getZeroMatricesForBiasGradients();\n\n    for (const image of miniBatch) {\n      const imageGradients = this.getGradients(\n        image,\n        regularizationRate,\n        trainingDataSize\n      );\n      for (let i = 1; i < this.layers; i++) {\n        weightGradients[i].mutAdd(imageGradients.weightGradients[i]);\n        biasGradients[i].mutAdd(imageGradients.biasGradients[i]);\n      }\n    }\n\n    for (let i = 1; i < this.layers; i++) {\n      weightGradients[i].mutMultiplyScalar(1 / miniBatch.length);\n      biasGradients[i].mutMultiplyScalar(1 / miniBatch.length);\n    }\n\n    return { weightGradients, biasGradients };\n  }\n\n  private getZeroMatricesForWeightGradients(): MatrixMap {\n    const matrices: MatrixMap = [];\n    for (let i = 1; i < this.layers; i++) {\n      const weightMatrix = this.weights[i];\n      matrices[i] = Matrix.zeros(weightMatrix.rows, weightMatrix.columns);\n    }\n    return matrices;\n  }\n\n  private getZeroMatricesForBiasGradients(): MatrixMap {\n    const matrices: MatrixMap = [];\n    for (let i = 1; i < this.layers; i++) {\n      const biasMatrix = this.biases[i];\n      matrices[i] = Matrix.zeros(biasMatrix.rows, biasMatrix.columns);\n    }\n    return matrices;\n  }\n\n  private getGradients(\n    image: VectorLabeledImage,\n    regularizationRate: number,\n    trainingDataSize: number\n  ): Gradients {\n    const { weightedSums, activations } = this.performForwardPass(image.inputs);\n    const errors: MatrixMap = [];\n    const weightGradients: MatrixMap = [];\n    const biasGradients: MatrixMap = [];\n\n    const lastLayerError = this.getLastLayerError(\n      activations[this.layers - 1],\n      image.outputs\n    );\n\n    errors[this.layers - 1] = lastLayerError;\n    weightGradients[this.layers - 1] = lastLayerError\n      .immutMultiply(activations[this.layers - 2].immutTranspose())\n      .mutAdd(\n        this.weights[this.layers - 1]\n          .clone()\n          .mutMultiplyScalar(regularizationRate / trainingDataSize)\n      );\n\n    biasGradients[this.layers - 1] = lastLayerError;\n\n    for (let i = this.layers - 2; i >= 1; i--) {\n      const error = this.weights[i + 1]\n        .immutTranspose()\n        .immutMultiply(errors[i + 1]);\n      error.mutHadamard(weightedSums[i].immutApplyElementwise(sigmaPrime));\n\n      errors[i] = error;\n      weightGradients[i] = error\n        .immutMultiply(activations[i - 1].immutTranspose())\n        .mutAdd(\n          this.weights[i]\n            .clone()\n            .mutMultiplyScalar(regularizationRate / trainingDataSize)\n        );\n      biasGradients[i] = error;\n    }\n\n    return { weightGradients, biasGradients };\n  }\n\n  performForwardPass(inputs: Matrix): WeightedSumsAndActivations {\n    const weightedSums: MatrixMap = [];\n    const activations: MatrixMap = [inputs];\n\n    for (let outputLayer = 1; outputLayer < this.layers; outputLayer++) {\n      const inputLayer = outputLayer - 1;\n      const weightedSum = this.weights[outputLayer].immutMultiply(\n        activations[inputLayer]\n      );\n      weightedSum.mutAdd(this.biases[outputLayer]);\n      weightedSums[outputLayer] = weightedSum;\n      activations[outputLayer] = weightedSum.immutApplyElementwise(sigma);\n    }\n    return { weightedSums, activations };\n  }\n\n  private getLastLayerError(\n    actualOutput: Matrix,\n    expectedOutput: Matrix\n  ): Matrix {\n    return actualOutput.immutSubtract(expectedOutput);\n  }\n\n  test(testData: LabeledImage[]): AccuracyRate {\n    let correctClassifications = 0;\n    for (const image of testData) {\n      const { activations } = this.performForwardPass(image.inputs);\n      const prediction = argmax(\n        activations[this.layers - 1].rowMajorOrderEntries()\n      );\n      if (prediction === image.label) {\n        correctClassifications++;\n      }\n    }\n    return { correct: correctClassifications, total: testData.length };\n  }\n\n  getWeights(): DeepReadonly<MatrixMap> {\n    return this.weights;\n  }\n\n  getBiases(): DeepReadonly<MatrixMap> {\n    return this.biases;\n  }\n}\n\nfunction sigma(z: number): number {\n  return 1 / (1 + Math.exp(-z));\n}\n\nfunction sigmaPrime(z: number): number {\n  const sigmaZ = sigma(z);\n  return sigmaZ * (1 - sigmaZ);\n}\n","import { MatrixMap, Network } from \".\";\nimport { Chapter3CrossEntropyL2Network } from \"./networks/ch3crossEntropyL2\";\n\nexport interface NetworkFactory {\n  fromSizes(sizes: number[]): Network;\n  fromWeightsAndBiases(weights: MatrixMap, biases: MatrixMap): Network;\n}\n\n/**\n * At any given time, the entire web app uses one and only\n * one neural network implementation.\n *\n * All other files will depend on `networkFactory`, which will\n * allow me to easily change which network I'm using by changing\n * only one variable.\n * Otherwise, if I wanted to change from using `NetworkX`\n * to `NetworkY`, I would have to go through the entire src\n * folder and replace every occurrence of `NetworkX` with\n * `NetworkY`.\n */\nexport const networkFactory: NetworkFactory = {\n  fromSizes(sizes: number[]): Network {\n    return new Chapter3CrossEntropyL2Network(sizes);\n  },\n  fromWeightsAndBiases(weights: MatrixMap, biases: MatrixMap): Network {\n    return Chapter3CrossEntropyL2Network.fromWeightsAndBiases(weights, biases);\n  },\n};\n","import { AccuracyRate } from \"./data\";\nimport { StochasticGradientDescentHyperParameters } from \"./network\";\n\nexport enum WorkerMessageType {\n  StartTrainingRequest,\n  TrainingEpochCompleteNotification,\n  TerminateTrainingRequest,\n  TerminateTrainingResponse,\n\n  StartTestingRequest,\n  TestCompleteNotification,\n}\n\nexport type NetworkTrainerRequest =\n  | StartTrainingRequest\n  | TerminateTrainingRequest;\n\nexport type NetworkTrainerNotification =\n  | TrainingEpochCompleteNotification\n  | TerminateTrainingResponse;\n\nexport interface StartTrainingRequest {\n  messageType: WorkerMessageType.StartTrainingRequest;\n\n  networkBuffer: ArrayBuffer;\n  hyperParams: StochasticGradientDescentHyperParameters;\n}\n\nexport interface TrainingEpochCompleteNotification {\n  messageType: WorkerMessageType.TrainingEpochCompleteNotification;\n\n  accuracyRate: AccuracyRate;\n  epoch: number;\n}\n\nexport interface TerminateTrainingRequest {\n  messageType: WorkerMessageType.TerminateTrainingRequest;\n}\n\nexport interface TerminateTrainingResponse {\n  messageType: WorkerMessageType.TerminateTrainingResponse;\n\n  networkBuffer: ArrayBuffer;\n}\n\nexport interface StartTestingRequest {\n  messageType: WorkerMessageType.StartTestingRequest;\n\n  networkBuffer: ArrayBuffer;\n}\n\nexport interface TestCompleteNotification {\n  messageType: WorkerMessageType.TestCompleteNotification;\n  accuracyRate: AccuracyRate;\n}\n","import { Matrix } from \"./matrix\";\nimport { MatrixMap, Network } from \"./network\";\nimport { networkFactory } from \"./network/networkFactory\";\n\nexport function serializeNetwork(network: Network): ArrayBuffer {\n  const entries = getEntries(network);\n\n  const numberOfBytesForSizes =\n    (1 + network.sizes.length) * Uint32Array.BYTES_PER_ELEMENT;\n\n  const buffer = new ArrayBuffer(\n    numberOfBytesForSizes + entries.length * entries.BYTES_PER_ELEMENT\n  );\n\n  const uints = new Uint32Array(\n    buffer,\n    0,\n    numberOfBytesForSizes / Uint32Array.BYTES_PER_ELEMENT\n  );\n\n  uints[0] = network.sizes.length;\n\n  for (let i = 0; i < network.sizes.length; i++) {\n    uints[1 + i] = network.sizes[i];\n  }\n\n  const floats = new Float64Array(buffer, numberOfBytesForSizes);\n  floats.set(entries);\n\n  return buffer;\n}\n\nfunction getEntries(network: Network): Float64Array {\n  const weights = network.getWeights();\n  const biases = network.getBiases();\n\n  let entryCount = 0;\n\n  for (let i = 1; i < weights.length; i++) {\n    const weightMatrix = weights[i];\n    const weightMatrixSize = weightMatrix.rows * weightMatrix.columns;\n    entryCount += weightMatrixSize;\n\n    const biasMatrix = biases[i];\n    const biasMatrixSize = biasMatrix.rows * biasMatrix.columns;\n    entryCount += biasMatrixSize;\n  }\n\n  const entries = new Float64Array(entryCount);\n\n  let cursor = 0;\n  for (let i = 1; i < weights.length; i++) {\n    const weightMatrixEntries = weights[i].rowMajorOrderEntries();\n    entries.set(weightMatrixEntries, cursor);\n    cursor += weightMatrixEntries.length;\n\n    const biasMatrixEntries = biases[i].rowMajorOrderEntries();\n    entries.set(biasMatrixEntries, cursor);\n    cursor += biasMatrixEntries.length;\n  }\n\n  return entries;\n}\n\nexport function deserializeNetwork(buffer: ArrayBuffer): Network {\n  const numberOfLayers = new Uint32Array(buffer, 0, 1)[0];\n  const layerSizes = new Uint32Array(buffer, 4, numberOfLayers);\n  const entries = new Float64Array(\n    buffer.slice(Uint32Array.BYTES_PER_ELEMENT * (1 + numberOfLayers))\n  );\n\n  const weights: MatrixMap = [];\n  const biases: MatrixMap = [];\n\n  let cursor = 0;\n  for (let i = 1; i < layerSizes.length; i++) {\n    const outputLayerSize = layerSizes[i];\n    const inputLayerSize = layerSizes[i - 1];\n\n    {\n      const rows = outputLayerSize;\n      const columns = inputLayerSize;\n      const size = rows * columns;\n      weights[i] = Matrix.fromRowMajorOrderEntries(\n        rows,\n        columns,\n        toArray(entries.subarray(cursor, cursor + size))\n      );\n\n      cursor += size;\n    }\n\n    {\n      const rows = outputLayerSize;\n      biases[i] = Matrix.fromRowMajorOrderEntries(\n        rows,\n        1,\n        toArray(entries.subarray(cursor, cursor + rows))\n      );\n\n      cursor += rows;\n    }\n  }\n\n  return networkFactory.fromWeightsAndBiases(weights, biases);\n}\n\nfunction toArray(floats: Float64Array): number[] {\n  const arr = new Array(floats.length);\n  for (let i = 0; i < floats.length; i++) {\n    arr[i] = floats[i];\n  }\n  return arr;\n}\n","import { AccuracyRate, LabeledImage, VectorLabeledImage } from \"../data\";\nimport { mnistProm } from \"../data/mnist\";\nimport { Network, StochasticGradientDescentHyperParameters } from \"../network\";\nimport { deserializeNetwork, serializeNetwork } from \"../networkSerializer\";\nimport {\n  NetworkTrainerNotification,\n  NetworkTrainerRequest,\n  StartTrainingRequest,\n  TerminateTrainingResponse,\n  TrainingEpochCompleteNotification,\n  WorkerMessageType,\n} from \"../workerMessages\";\nimport { Option, option } from \"rusty-ts\";\n\ninterface Self {\n  postMessage(\n    message: NetworkTrainerNotification,\n    transfers?: Transferable[]\n  ): void;\n  addEventListener: Worker[\"addEventListener\"];\n}\n\ndeclare const self: Self;\n\nexport {};\n\nlet shouldTerminateAfterThisEpoch = false;\nlet trainedNetwork: Option<Network> = option.none();\n\nself.addEventListener(\"message\", (event) => {\n  const { data } = event;\n\n  if (data !== null && \"object\" === typeof data && \"messageType\" in data) {\n    const message: NetworkTrainerRequest = data;\n    switch (message.messageType) {\n      case WorkerMessageType.StartTrainingRequest:\n        startTrainingOnceMnistLoads(message);\n        break;\n      case WorkerMessageType.TerminateTrainingRequest:\n        terminateTrainingAfterThisEpoch();\n        break;\n\n      default: {\n        // Force exhaustive matching\n\n        // eslint-disable-next-line\n        const unreachable: never = message;\n      }\n    }\n  }\n});\n\nfunction startTrainingOnceMnistLoads(message: StartTrainingRequest): void {\n  const network = deserializeNetwork(message.networkBuffer);\n\n  mnistProm.then((mnist) => {\n    startTraining(network, message.hyperParams, mnist.training, mnist.test);\n  });\n}\n\nfunction startTraining(\n  network: Network,\n  hyperParams: StochasticGradientDescentHyperParameters,\n  trainingData: VectorLabeledImage[],\n  testData: LabeledImage[]\n): void {\n  let epochsCompleted = 0;\n\n  scheduleNextEpochUnlessTerminated();\n\n  function scheduleNextEpochUnlessTerminated(): void {\n    if (shouldTerminateAfterThisEpoch) {\n      notifyListenersOfTermination(network);\n    } else {\n      requestAnimationFrame(performEpoch);\n    }\n  }\n\n  function performEpoch(): void {\n    network.stochasticGradientDescent(trainingData, {\n      ...hyperParams,\n      epochs: 1,\n    });\n\n    notifyListenersOfEpochCompletion(network.test(testData), epochsCompleted);\n\n    epochsCompleted++;\n    if (epochsCompleted < hyperParams.epochs) {\n      scheduleNextEpochUnlessTerminated();\n    } else {\n      trainedNetwork = option.some(network);\n    }\n  }\n}\n\nfunction notifyListenersOfTermination(network: Network): void {\n  const message: TerminateTrainingResponse = {\n    messageType: WorkerMessageType.TerminateTrainingResponse,\n    networkBuffer: serializeNetwork(network),\n  };\n  self.postMessage(message, [message.networkBuffer]);\n}\n\nfunction notifyListenersOfEpochCompletion(\n  accuracyRate: AccuracyRate,\n  epoch: number\n): void {\n  const message: TrainingEpochCompleteNotification = {\n    messageType: WorkerMessageType.TrainingEpochCompleteNotification,\n    accuracyRate,\n    epoch,\n  };\n  self.postMessage(message);\n}\n\nfunction terminateTrainingAfterThisEpoch(): void {\n  trainedNetwork.match({\n    none: () => {\n      shouldTerminateAfterThisEpoch = true;\n    },\n\n    some: notifyListenersOfTermination,\n  });\n}\n"],"sourceRoot":""}